# N8N-R8 Autoupdate Configuration
# Copy this to your .env file and customize as needed

# ==============================================
# AUTOUPDATE SETTINGS
# ==============================================

# Enable/disable autoupdate functionality
AUTOUPDATE_ENABLED=false

# Create backup before updating (recommended)
BACKUP_BEFORE_UPDATE=true

# Rollback to backup if update fails (recommended)
ROLLBACK_ON_FAILURE=true

# Maximum number of days to keep pre-update backups
MAX_BACKUP_RETENTION=7

# Update check interval in seconds (86400 = 24 hours)
UPDATE_CHECK_INTERVAL=86400

# Cron schedule for automatic updates (default: daily at 2 AM)
# Format: minute hour day month weekday
AUTOUPDATE_CRON_SCHEDULE="0 2 * * *"

# ==============================================
# WATCHTOWER SETTINGS
# ==============================================

# Watchtower poll interval in seconds (86400 = 24 hours)
WATCHTOWER_POLL_INTERVAL=86400

# Enable label-based updates only
WATCHTOWER_LABEL_ENABLE=true

# Cleanup old images after update
WATCHTOWER_CLEANUP=true

# Include stopped containers in updates
WATCHTOWER_INCLUDE_STOPPED=true

# Watchtower schedule (cron format) - default: daily at 2 AM
WATCHTOWER_SCHEDULE="0 0 2 * * *"

# Enable debug mode for Watchtower
WATCHTOWER_DEBUG=false

# Rolling restart (update one container at a time)
WATCHTOWER_ROLLING_RESTART=true

# Timeout for container stop (seconds)
WATCHTOWER_TIMEOUT=10s

# Run once and exit (for manual updates)
WATCHTOWER_RUN_ONCE=false

# ==============================================
# NOTIFICATION SETTINGS
# ==============================================

# Enable notifications for updates
NOTIFICATION_ENABLED=true

# Slack webhook URL for notifications
SLACK_WEBHOOK_URL=

# Slack channel for notifications (optional)
WATCHTOWER_SLACK_CHANNEL=#alerts

# Slack identifier for Watchtower notifications
WATCHTOWER_SLACK_IDENTIFIER=n8n-autoupdate

# Email notifications
NOTIFICATION_EMAIL=
SMTP_SERVER=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# Watchtower email settings
WATCHTOWER_EMAIL_FROM=
WATCHTOWER_EMAIL_TO=
WATCHTOWER_EMAIL_SERVER=
WATCHTOWER_EMAIL_PORT=587
WATCHTOWER_EMAIL_USER=
WATCHTOWER_EMAIL_PASSWORD=

# ==============================================
# ADVANCED SETTINGS
# ==============================================

# Custom update commands (optional)
PRE_UPDATE_COMMAND=
POST_UPDATE_COMMAND=

# Health check timeout after update (seconds)
HEALTH_CHECK_TIMEOUT=300

# Custom backup directory (optional)
CUSTOM_BACKUP_DIR=

# Enable maintenance mode during updates
MAINTENANCE_MODE_ENABLED=false

# Maintenance mode message
MAINTENANCE_MESSAGE="N8N is currently being updated. Please try again in a few minutes."
